;===============================================================================
;                       Здесь размещены все глобальные
;                            параметры ОС Gelios
;               Изменение разрешено только для драйверов и ядра
;                         Таблица стандартизирована,
;               обращаться к элементам можно сразу по смещениям,
;                 добавление элементов только в конец таблицы!
;===============================================================================

GlobalValues:

  ;GDTLimit:dw gdt_end-gdt_0-1 ; Предел GDT
  ;GDTAddress:  dd GDTPtr      ; Адрес GDT
  ;
  ;IDTLimit:dw idt_end-idt_0-1 ; Предел IDT  
  ;IDTAddress:  dd IDTPtr      ; Адрес IDT

;===============================================================================
;                           Текущие дата и время
;-------------------------------------------------------------------------------
CurrentDate:
  .Year                 dw 0  ; Текущий год
  .Month                db 0  ; Текущий месяц
  .Day                  db 0  ; Текущий день месяца
  .Hour                 db 0  ; Текущий час
  .Minute               db 0  ; Текущая минута
  .Second               db 0  ; Текущая секунда
;===============================================================================
  
;===============================================================================
;                                Видеорежим
;-------------------------------------------------------------------------------
VideoMode:
  .Width                dd 0  ; Разрешение по горизонтали
  .Height               dd 0  ; Разрешение по вертикали
  .PixelBytes           dd 0  ; Число используемых байт на пиксель
  .RedBits              dd 0  ; Число бит на красную компоненту цвета
  .GreenBits            dd 0  ; Число бит на зеленую компоненту цвета
  .BlueBits             dd 0  ; Число бит на синюю компоненту цвета
  .ReserveBits          dd 0  ; Число зерезервированых бит
  .Number               dw 0  ; Номер установленного видеорежима
;===============================================================================
  
;===============================================================================
;                           Системные характеристики
;-------------------------------------------------------------------------------
  MemorySize              dw 0  ; Объем памяти в блоках по 64 КБ
  CPUFreq                 dw 0  ; Тактовая частота процессора в МГц
;===============================================================================
  

;===============================================================================
;                           Дисковые устройства
;-------------------------------------------------------------------------------
  BootDeviceID          db 0  ; GeFS-идентификатор  загрузочного тома
  
; Классы носителей информации
; 16 классов по 16 томов в каждом, общий размер таблицы 8 КБ
; Размер идентификатора каждого тома равен 32 байтам
; Первые три элемента(имя, размер, адрес) стандартизированы
; и доступны на любом устройстве, а остальные 8 байт
; зависят от конкретного типа устройства
; Для каждого класса существуют отдельные драйвера
  DiskTable:
  .Class0:            ; Класс 0: дисковые устройства LBA-IDE GeFS
    %rep 16
    TIMES 16 db 0             ; Имя тома (если 0 - тома не существует)
             dd 0             ; Размер тома     
             dd 0             ; Базовый адрес раздела и номер канала
             dw 0             ; Базовый порт контроллера
    TIMES 6  db 0             ; Резерв (равно 0)
    %endrep
  .Class1:            ; Класс 1: виртуальные тома в памяти GeFS
    %rep 16
    TIMES 16 db 0             ; Имя тома (если 0 - тома не существует)
             dd 0             ; Размер тома
             dd 0             ; Базовый адрес раздела в памяти
    TIMES 8  db 0             ; Резерв (равно 0)
    %endrep
 
  TIMES 14*16*32 db 0
  
;===============================================================================

; Устройство: клавиатура
  Keyboard:
; Состояние каждой из 128 клавиш клавиатуры
; 0 - отпущена, 0xFF - нажата  
  .Keys: TIMES 128  db 0
; Параметры работы клавиатуры (данные готовы для записи в порт)
  .KeyTime:             db 0  ;  Байт временных характеристик клавиатуры
  .KeyDiods:            db 0  ;  Байт состояния светодиодов


  


GlobalValuesEnd: